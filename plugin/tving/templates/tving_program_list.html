{% extends "base.html" %}
{% block content %}

<ul class="nav nav-pills bg-light shadow text-dark" >
  <li class="nav-item"><a class="nav-link " href="/tving/program/select">선택</a></li>
  <li class="nav-item"><a class="nav-link active" href="/tving/program/list">목록</a></li>
</ul>
<div class="d-inline-block"></div>

<div>
  <div class="btn-group btn-group-sm flex-wrap mr-2" role="group">
    <button id="load_channel_btn" name="load_channel_btn" class="btn btn-sm btn-outline-success">채널로딩</button>
  </div>

  {{ macros.info_text('summary', '요약', value='Rclone 실행중이 아닙니다.') }}
  {{ macros.setting_input_text_and_buttons('job_name', '작업 이름', [['stop', '중지'], ['scheduler_stop', '스케쥴링 중지']], disabled=True ) }}

  {{ macros.setting_input_textarea('command', '명령', disabled=True, row='5') }}

  {{ macros.setting_progress('data_progress', '데이터') }}
  {{ macros.setting_progress('file_progress', '파일') }}
  {{ macros.info_text('trans_speed', '전송 속도') }}
  {{ macros.info_text('rt_time', '전체 남은 시간') }}
  {{ macros.info_text('r_time', '진행 시간') }}
  {{ macros.info_text('error', 'Errors') }}

    
  <div id="file_list_div"></div>
  
  <div id="finished_file_list_div"></div>
  
  <div id="log_list_div"></div>
</div> <!--전체-->




<script type="text/javascript">
var package_name = 'tving';
$(document).ready(function(){

  
  
});


function make_program_page(ret) {
  m_modal(ret)
  data = ret.data.body.result
  str = '';
  for (i in data) {
    str += '<hr>';
    str += '<div class="row">';
    str += '<div class="col-sm-3">'
    str += '<img src="http://image.tving.com' + data[i].episode.image[0].url + '" class="img-fluid">'
    str += '</div>';
    str += '<div class="col-sm-9">'
    str += '<div>';
    str += '<strong>' + data[i].vod_name.ko+ '</strong>';
    str += '<br>';
    str += data[i].episode.broadcast_date + '<br><p></p>';
    if ( data[i].episode.synopsis.ko != null)
      str += '<p>' + data[i].episode.synopsis.ko.replace('\n', '<br>') + '</p>';
    str += '</div>';
    str += '<div>';
    str += '<button id="episode_search" name="submit" class="btn btn-sm  btn-outline-success" data-episode="'+data[i].episode.code + '">에피소드</button>';
    str += '</div>';
    str += '</div>';
    str += '</div>';
  }
  if (ret.page == '1') {
    document.getElementById("detail").innerHTML = str;
  } else {
    document.getElementById("detail").innerHTML += str;
  }
  
  if (ret.data.body.has_more == 'Y') {
    str = '<div class="d-inline-block"></div><form>';
    str += '<button id="more_btn" class="btn btn-outline-secondary btn-lg btn-block" type="button" data-code="'+ret.code+'" data-page="'+ret.page+'">More</button>'
    str += '</form>';
    document.getElementById("more").innerHTML = str;
  } else {
    document.getElementById("more").innerHTML = '';
  }
}
  
</script>    
{% endblock %}